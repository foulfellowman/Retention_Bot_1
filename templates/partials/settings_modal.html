<div id="modal-backdrop"
     style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); z-index: 1000;">

  <div id="modal-content"
       style="position: relative; max-width: 600px; margin: 10% auto; padding: 20px; background: white; border-radius: 8px; z-index: 1001;">

    <!-- Close Button -->
    <button onclick="closeModal()"
            style="position: absolute; top: 10px; right: 10px; border: none; background: transparent; font-size: 1.5em; cursor: pointer;">
      âœ•
    </button>

    <!-- Settings Form -->
    <h2>Settings</h2>

    <form hx-post="/save-settings" hx-target="#modal-container" hx-swap="innerHTML">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <div>
        <label for="modal-api-key">API Key</label><br>
        <input class="settings-input" type="password" value="{{ user.api_key or '' }}" name="api-key" readonly id="modal-api-key">
        <button type="button" onclick="enableSettingsField('modal-api-key')">Edit</button>
      </div>

      <div>
        <label for="modal-twilio-sid">Twilio SID</label><br>
        <input class="settings-input" type="text" value="{{ user.twilio_sid or '' }}" name="twilio-sid" readonly id="modal-twilio-sid">
        <button type="button" onclick="enableSettingsField('modal-twilio-sid')">Edit</button>
      </div>

      <div>
        <label for="modal-twilio-token">Twilio Token</label><br>
        <input class="settings-input" type="password" value="{{ user.twilio_token or '' }}" name="twilio-token" readonly id="modal-twilio-token">
        <button type="button" onclick="enableSettingsField('modal-twilio-token')">Edit</button>
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button type="submit">Save Settings</button>
        <button type="button" onclick="closeModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>

<script>
  window.enableSettingsField = window.enableSettingsField || function (id) {
    var input = document.getElementById(id);
    if (!input) return;
    input.readOnly = false;
    input.classList.add('settings-input--editable');
    input.focus();
    if (typeof input.select === "function") {
      input.select();
    }
  };
</script>
